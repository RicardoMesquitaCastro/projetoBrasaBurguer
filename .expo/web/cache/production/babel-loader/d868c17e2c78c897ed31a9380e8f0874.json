{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}import React,{Component}from'react';import Text from\"react-native-web/dist/exports/Text\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import View from\"react-native-web/dist/exports/View\";import TextInput from\"react-native-web/dist/exports/TextInput\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import Image from\"react-native-web/dist/exports/Image\";var _Dimensions$get=Dimensions.get(\"window\"),width=_Dimensions$get.width;import{css}from\"../constants/Css\";import{LoginManager,AccessToken}from'react-native-fbsdk-next';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Profile=function(_Component){_inherits(Profile,_Component);var _super=_createSuper(Profile);function Profile(props){var _this;_classCallCheck(this,Profile);_this=_super.call(this,props);_this.state={id_facebook:null,picture:null,name:null,email:null,token:null};return _this;}_createClass(Profile,[{key:\"render\",value:function render(){var _this2=this;return _jsxs(View,{style:css.container,children:[_jsx(Image,{style:{height:100,width:width/2,margin:10},resizeMode:\"contain\",source:require(\"../assets/images/brasalogo.png\")}),_jsxs(View,{style:css.footer,children:[_jsx(TextInput,{style:css.input,placeholder:\"Digite seu nome\",onChangeText:function onChangeText(text){return setUser(text);}}),_jsx(TextInput,{style:css.input,placeholder:\"Digite a senha:\",secureTextEntry:true,onChangeText:function onChangeText(text){return setPassword(text);}}),_jsx(TextInput,{style:css.input,placeholder:\"Digite o email:\",secureTextEntry:true,onChangeText:function onChangeText(text){return setPassword(text);}}),_jsx(TouchableOpacity,{style:{backgroundColor:\"#ff7200\",width:width-150,alignItems:'center',padding:10,borderRadius:5},children:_jsx(Text,{style:css.button__text,children:\"Enviar\"})})]}),this.state.id_facebook?_jsxs(View,{style:{justifyContent:'center'},children:[_jsx(Image,{source:{uri:this.state.picture.data.url},style:{width:200,height:200}}),_jsx(View,{style:{height:20}}),_jsx(Text,{style:{fontSize:20,fontWeight:\"bold\"},children:this.state.name}),_jsx(Text,{style:{fontSize:20},children:this.state.email}),_jsx(View,{style:{height:20}}),_jsx(Text,{children:\"facebook ID\"}),_jsx(Text,{children:this.state.id_facebook})]}):_jsx(TouchableOpacity,{onPress:function onPress(){return _this2._authFB();},style:{backgroundColor:\"#3b5998\",width:width-40,alignItems:'center',padding:10,borderRadius:5},children:_jsx(Text,{style:{fontSize:24,fontWeight:\"bold\",color:'white'},children:\"Login facebook\"})})]});}},{key:\"_AuthFB\",value:function _AuthFB(){var dhis=this;LoginManager.logInWithPermissions([\"public_profile\",\"email\"]).then(function(result){if(result.isCancelled){console.log(\"Login cancelled\");}else{console.log(\"Login success with permissions: \"+result.grantedPermissions.toString());dhis._setDataFB();}},function(error){console.log(\"Login fail with error: \"+error);});}},{key:\"_setDataFB\",value:function _setDataFB(){var tokenData,datajson,data_fb;return _regeneratorRuntime.async(function _setDataFB$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(AccessToken.getCurrentAccessToken().then(function(data){return data.accessToken.toString();}));case 2:tokenData=_context.sent;_context.next=5;return _regeneratorRuntime.awrap(this.apiGraphFace(tokenData));case 5:datajson=_context.sent;if(datajson.success){console.log(datajson.data);data_fb={id_facebook:datajson.data.id,email:datajson.data.email,name:datajson.data.name,picture:datajson.data.picture};this.setState(data_fb);}else{console.log(\"Error get data\");}case 7:case\"end\":return _context.stop();}}},null,this,null,Promise);}},{key:\"apiGraphFace\",value:function apiGraphFace(token){var resface;return _regeneratorRuntime.async(function apiGraphFace$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _regeneratorRuntime.awrap(fetch('https://graph.facebook.com/v2.10/me?fields=id,name,email,picture.width(500)&access_token='+token).then(function(response){return response.json();}).then(function(json){var data={data:json,success:true};return data;}).catch(function(error){var data={message:error,success:false};return data;}));case 2:resface=_context2.sent;return _context2.abrupt(\"return\",resface);case 4:case\"end\":return _context2.stop();}}},null,null,null,Promise);}}]);return Profile;}(Component);export{Profile as default};","map":{"version":3,"sources":["C:/Users/ricar/OneDrive/Área de Trabalho/myBuild git/pages/Profile.js"],"names":["React","Component","Dimensions","get","width","css","LoginManager","AccessToken","Profile","props","state","id_facebook","picture","name","email","token","container","height","margin","require","footer","input","text","setUser","setPassword","backgroundColor","alignItems","padding","borderRadius","button__text","justifyContent","uri","data","url","fontSize","fontWeight","_authFB","color","dhis","logInWithPermissions","then","result","isCancelled","console","log","grantedPermissions","toString","_setDataFB","error","getCurrentAccessToken","accessToken","tokenData","apiGraphFace","datajson","success","data_fb","id","setState","fetch","response","json","catch","message","resface"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Text, Dimensions,  View, TextInput, TouchableOpacity, Image } from 'react-native';\r\nvar { width } = Dimensions.get(\"window\")\r\nimport { css } from '../constants/Css';\r\nimport { LoginManager, AccessToken } from 'react-native-fbsdk-next'\r\n\r\n\r\nexport default class Profile extends Component {\r\n\r\n  constructor(props) {\r\n     super(props);\r\n     this.state = {\r\n       id_facebook:null,\r\n       picture:null,\r\n       name:null,\r\n       email:null,\r\n       token:null\r\n     };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      \r\n      \r\n      <View style={css.container}>\r\n<Image style={{height:100,width:width/2,margin:10 }} resizeMode=\"contain\" source={require(\"../assets/images/brasalogo.png\")}  />\r\n                \r\n                <View style={css.footer}>\r\n                    \r\n                    <TextInput\r\n                            style={css.input}\r\n                            placeholder=\"Digite seu nome\"\r\n                            onChangeText={(text)=>setUser(text)}\r\n                    />\r\n\r\n                    <TextInput\r\n                            style={css.input}\r\n                            placeholder=\"Digite a senha:\"\r\n                            secureTextEntry={true} \r\n                            onChangeText={(text)=>setPassword(text)}// em TouchableOpacity quando o botao enviar for acionado o onPress recebe a função\r\n                    />\r\n                    <TextInput\r\n                            style={css.input}\r\n                            placeholder=\"Digite o email:\"\r\n                            secureTextEntry={true} \r\n                            onChangeText={(text)=>setPassword(text)}// em TouchableOpacity quando o botao enviar for acionado o onPress recebe a função\r\n                    />\r\n\r\n                    \r\n                    <TouchableOpacity  style={{\r\n               backgroundColor:\"#ff7200\",\r\n               width:width-150,\r\n               alignItems:'center',\r\n               padding:10,\r\n               borderRadius:5,\r\n               \r\n             }}> \r\n                        <Text style={css.button__text}>Enviar</Text>\r\n                    </TouchableOpacity>\r\n                  \r\n                </View>\r\n            \r\n\r\n         {\r\n           this.state.id_facebook?\r\n           <View style={{justifyContent:'center'}}>\r\n             <Image source={{uri: this.state.picture.data.url}} style={{width:200,height:200}} />\r\n             <View style={{height:20}} />\r\n             <Text style={{fontSize:20,fontWeight:\"bold\"}}>{this.state.name}</Text>\r\n             <Text style={{fontSize:20}}>{this.state.email}</Text>\r\n             <View style={{height:20}} />\r\n             <Text >facebook ID</Text>\r\n             <Text >{this.state.id_facebook}</Text>\r\n           </View>\r\n           :\r\n           <TouchableOpacity \r\n             onPress={()=>this._authFB()}\r\n             style={{\r\n               backgroundColor:\"#3b5998\",\r\n               width:width-40,\r\n           alignItems:'center',\r\n           padding:10,\r\n           borderRadius:5\r\n               \r\n             }}>\r\n             <Text style={{\r\n                 fontSize:24,\r\n                 fontWeight:\"bold\",\r\n                 color:'white'\r\n               }}>\r\n               Login facebook\r\n             </Text>\r\n           </TouchableOpacity>\r\n         }\r\n\r\n\r\n\r\n      </View>\r\n    );\r\n  }\r\n\r\n  _AuthFB()\r\n  {\r\n    const dhis = this\r\n    // Attempt a login using the Facebook login dialog asking for default permissions.\r\n    LoginManager.logInWithPermissions([\"public_profile\",\"email\"]).then(\r\n      function(result) {\r\n        if (result.isCancelled) {\r\n          console.log(\"Login cancelled\");\r\n        } else {\r\n          console.log(\r\n            \"Login success with permissions: \" +\r\n              result.grantedPermissions.toString()\r\n          );\r\n          dhis._setDataFB()\r\n        }\r\n      },\r\n      function(error) {\r\n        console.log(\"Login fail with error: \" + error);\r\n      }\r\n    );\r\n  }\r\n  async _setDataFB()\r\n  {\r\n    // get token from facebook\r\n    const tokenData = await AccessToken.getCurrentAccessToken().then(\r\n      (data) => {\r\n        return  data.accessToken.toString()\r\n      }\r\n    )\r\n    // get data about profile from api graph\r\n    const datajson = await this.apiGraphFace(tokenData)\r\n\r\n    if (datajson.success) {\r\n        console.log(datajson.data);\r\n       // variable para enviar post\r\n        const data_fb =  {\r\n          id_facebook: datajson.data.id,\r\n          email : datajson.data.email,\r\n          name  : datajson.data.name,\r\n          picture: datajson.data.picture\r\n        }\r\n        this.setState(data_fb);\r\n    }\r\n    else {\r\n      console.log(\"Error get data\");\r\n    }\r\n  }\r\n\r\n  async apiGraphFace (token)  {\r\n\r\n    const resface = await fetch('https://graph.facebook.com/v2.10/me?fields=id,name,email,picture.width(500)&access_token='+token)\r\n   .then((response) => response.json())\r\n   .then((json) => {\r\n     const data = {\r\n       data: json,\r\n       success: true\r\n     }\r\n     return data ;\r\n   })\r\n   .catch((error) => {\r\n     const data = {\r\n       message: error,\r\n       success: false\r\n     }\r\n     return data;\r\n   })\r\n\r\n   return resface;\r\n }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}